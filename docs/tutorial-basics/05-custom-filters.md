---
title: فیلترهای سفارشی
description: نحوه ساخت و استفاده از فیلترهای سفارشی در RubJS برای فیلتر کردن پیام‌ها.
sidebar_position: 1
---

# فیلترهای سفارشی (Custom Filters)

در RubJS، شما می‌توانید فیلترهای دلخواه خود را به راحتی تعریف کرده و همراه با فیلترهای پیش‌فرض استفاده کنید تا فقط پیام‌هایی که شرایط خاصی دارند، توسط ربات پردازش شوند.

---

## مثال ساده از فیلتر سفارشی

در مثال زیر، تنها پیام‌هایی پردازش می‌شوند که از طرف یک `object_guid` خاص ارسال شده باشند و همچنین دارای متن باشند:

```js
const { Client, Utils, Filters } = require("rubjs");

const bot = new Client("bot");

// فقط پیام‌هایی که از این شناسه ارسال شده‌اند
const object_guid = "object_guid";

// تعریف فیلتر سفارشی
const customFilter = (msg) => msg.object_guid === object_guid;

bot.onMessageUpdates([customFilter, Filters.isText], async (message) => {
  await message.reply(`Hello ${Utils.Italic("from")} ${Utils.Bold("RubJS")}!`);
});

bot.run();
```

## فیلترهای بیشتر
در RubJS، شما می‌توانید با استفاده از ساختارهای آرایه‌ای تو در تو، فیلترهای پیچیده‌تری تعریف کنید. این ساختارها امکان ترکیب فیلترها به صورت AND و OR و حتی ترکیبی از هر دو را فراهم می‌کنند.

### نمونه فیلتر AND
در حالت پیش‌فرض اگر چند فیلتر را در یک آرایه قرار دهید، همه‌ی آن‌ها باید برقرار باشند (عملگر AND).
```js
bot.onMessageUpdates([Filters.isGroup, Filters.isText], async (msg) => {
  await msg.reply("سلام");
});
```

📌 توضیح: فقط زمانی پیام پردازش می‌شود که هم یک پیام متنی (isText) باشد و هم در گروه ارسال شده باشد (isGroup).

### نمونه فیلتر OR
اگر فیلترها را در یک آرایه‌ی داخلی (تو در تو) قرار دهید، کافی‌ست حداقل یکی از آن‌ها برقرار باشد.

```js
bot.onMessageUpdates([[Filters.isForward, Filters.isLink]], async (msg) => {
  await msg.reply("سلام");
});
```

📌 توضیح: اگر پیام فوروارد شده باشد یا حاوی لینک باشد، پردازش انجام می‌شود.

### نمونه فیلتر ترکیبی (AND + OR)
می‌توانید فیلترها را ترکیب کنید؛ مثلاً پیام باید در گروه باشد و یکی از شرایط لینک یا فوروارد بودن را داشته باشد.

```js
bot.onMessageUpdates([Filters.isGroup, ّ[Filters.isForward, Filters.isLink]], async (msg) => {
  await msg.reply("سلام");
});
```

توضیح: این فیلتر ترکیبی، ابتدا بررسی می‌کند که پیام در گروه ارسال شده باشد (isGroup) و سپس بررسی می‌کند که پیام یا فوروارد باشد یا حاوی لینک (یکی از این دو کافی‌ست).

## منطق کلی
- []: فیلترهای داخل این آرایه به صورت AND عمل می‌کنند (همه باید برقرار باشند).
- [[]]: آرایه داخلی باعث می‌شود فیلترهای آن به صورت OR عمل کنند (یکی کافی‌ست).
- امکان ترکیب چند سطحی از AND و OR وجود دارد.

